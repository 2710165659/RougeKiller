{"version":3,"file":"js/723.48dbf3ee.js","mappings":"qhBA0CA,MAAMA,EAAQC,EACRC,GAAOC,EAAAA,EAAAA,IAAIH,EAAMI,KAAKC,YAAc,KAAO,M,qiCCrCjD,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,Q,oBCJO,MAAMC,GAAyBC,EAAAA,EAAAA,IAAY,iBAAkB,CAClEC,MAAOA,KAAA,CACLC,YAAa,GACbC,YAAYC,EAAAA,EAAAA,IAAS,CACnBC,MAAO,GACPC,IAAK,GACLC,QAAS,GACTC,SAAU,EACVC,QAAS,IAEXC,MAAO,EACPC,eAAgB,EAChBC,YAAa,IAEfC,QAAS,CACP,oBAAMC,GACJC,KAAKb,YAAc,GAEnB,MAAMc,QAAiBC,EAAAA,EAAKC,IAAI,mBAAoB,CAClDC,OAAQJ,KAAKZ,aAGfY,KAAKb,YAAcc,EAASpB,KAAKA,MAAQ,GACzCmB,KAAKL,MAAQM,EAASpB,KAAKc,OAAS,EACpCK,KAAKJ,eAAiBK,EAASpB,KAAKe,gBAAkB,EACtDI,KAAKH,YAAcI,EAASpB,KAAKgB,aAAe,CAClD,EAEAQ,WAAAA,GACEL,KAAKZ,YAAaC,EAAAA,EAAAA,IAAS,CACzBC,MAAO,GACPC,IAAK,GACLC,QAAS,GACTC,SAAU,EACVC,QAAS,IAEXM,KAAKb,YAAc,EACrB,K,oDChCJ,MAAMmB,EAAQtB,IACRuB,GAAW3B,EAAAA,EAAAA,IAAI,MACrB,IAAI4B,EAAgB,KAEpB,MAAMC,EAAYA,KACTF,EAASG,QAEdF,EAAgBG,EAAAA,GAAaJ,EAASG,OACtCE,IAAa,EAGXA,EAAcA,KAChB,IAAKJ,EAAe,OAEpB,MAAMK,EAAS,CACXC,QAAS,CACLC,QAAS,OACTC,gBAAiB,YACjBC,YAAa,OACbC,UAAW,iBACXC,UAAW,CACPC,MAAO,SAGfC,OAAQ,CACJC,OAAQ,aACRC,KAAM,SACNC,IAAK,GACLL,UAAW,CACPC,MAAO,SAGfK,OAAQ,CACJ,CACIC,KAAM,MACNC,OAAQ,CAAC,MAAO,OAChBC,mBAAmB,EACnBC,MAAO,CACHC,MAAM,EACNC,SAAU,SACVC,SAAU,KACVC,WAAY,OACZb,MAAO,UACPF,UAAW,QAEfrC,KAAM,CACF,CAAE6B,MAAOJ,EAAMV,eAAgBsC,KAAM,QACrC,CAAExB,MAAOJ,EAAMT,YAAaqC,KAAM,YAMlD1B,EAAc2B,UAAUtB,EAAO,GAGnCuB,EAAAA,EAAAA,KAAU,KACN3B,IACA4B,OAAOC,iBAAiB,SAAUC,EAAa,KAGnDC,EAAAA,EAAAA,KAAgB,KACRhC,IACAA,EAAciC,UACdjC,EAAgB,MAEpB6B,OAAOK,oBAAoB,SAAUH,EAAa,IAGtD,MAAMA,EAAeA,KACb/B,GACAA,EAAcmC,QAClB,E,OAGJC,EAAAA,EAAAA,KACI,IAAM,CAACtC,EAAMV,eAAgBU,EAAMT,eACnC,KACIe,GAAa,GAEjB,CAAEiC,MAAM,I,8GCtFZ,MAAM,EAAc,EAEpB,Q,8RCsEA,MAAMvC,EAAQtB,KAEdoD,EAAAA,EAAAA,KAAUU,UACNC,GAAQ,IAGZ,MAAMC,EAAeA,KACjB1C,EAAMlB,WAAWM,QAAU,EAC3BqD,GAAQ,EAGN1C,EAAcA,KAChBC,EAAMD,cACN0C,GAAQ,EAGNA,EAASD,UACX,UACUxC,EAAMP,gBAChB,CAAE,MAAOkD,GACLC,EAAAA,GAAUD,MAAMA,EAAMhD,UAAUpB,MAAQoE,EAAME,QAClD,G,m+EC1FJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://rouge_vue/./src/components/websites/search/WebsiteCard.vue","webpack://rouge_vue/./src/components/websites/search/WebsiteCard.vue?ea71","webpack://rouge_vue/./src/store/websitesSearch.js","webpack://rouge_vue/./src/components/websites/search/CountCirclrChart.vue","webpack://rouge_vue/./src/components/websites/search/CountCirclrChart.vue?c6ea","webpack://rouge_vue/./src/views/websites/Search.vue","webpack://rouge_vue/./src/views/websites/Search.vue?d8ae"],"sourcesContent":["<template>\r\n    <div class=\"website-card\" :class=\"{ malicious: data.isMalicious }\">\r\n        <div class=\"icon-container\">\r\n            <el-icon :size=\"40\">\r\n                <Link />\r\n            </el-icon>\r\n        </div>\r\n\r\n        <div class=\"url-button\" :class=\"{ bad: data.isMalicious }\">\r\n            <span>{{ text }}</span>\r\n            {{ data.url }}\r\n        </div>\r\n\r\n        <div class=\" info-list\">\r\n            <div class=\"info-item\">\r\n                <span class=\"info-label\">标题：</span>\r\n                <span class=\"info-value\">{{ data.title }}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n                <span class=\"info-label\">URL：</span>\r\n                <span class=\"info-value\">{{ data.url }}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n                <span class=\"info-label\">端口：</span>\r\n                <span class=\"info-value\">{{ data.port }}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n                <span class=\"info-label\">所属：</span>\r\n                <span class=\"info-value\">{{ data.company }}</span>\r\n            </div>\r\n            <div class=\"info-item\">\r\n                <span class=\"info-label\">备案：</span>\r\n                <span class=\"info-value\">{{ data.serviceCode }}</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Link } from '@element-plus/icons-vue'\r\nimport { ref } from 'vue'\r\n\r\nconst props = defineProps(['data'])\r\nconst text = ref(props.data.isMalicious ? '恶意' : '正常')\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.website-card {\r\n    transition: all 0.3s;\r\n    border-radius: 10px;\r\n    box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.2);\r\n    overflow: hidden;\r\n    background: #343a40;\r\n    color: #e0e0e0;\r\n}\r\n\r\n.icon-container {\r\n    text-align: center;\r\n    margin-top: 8px;\r\n    margin-bottom: 3px;\r\n}\r\n\r\n.url-button {\r\n    font-size: 12px;\r\n    padding: 7px;\r\n    text-align: center;\r\n    color: #507cff;\r\n}\r\n\r\n.url-button span {\r\n    border: 1px solid #409eff;\r\n    padding: 2px 8px;\r\n    border-radius: 12px;\r\n    margin-right: 5px;\r\n    color: #409eff;\r\n}\r\n\r\n.bad {\r\n    color: #f56c6c;\r\n}\r\n\r\n.bad span {\r\n    color: #f56c6c;\r\n    border-color: #f56c6c;\r\n}\r\n\r\n.website-card:hover {\r\n    transform: translateY(-5px);\r\n    box-shadow: 0 6px 18px 0 rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.malicious .icon-container :deep(svg),\r\n.malicious .url-button :deep(.el-button) {\r\n    color: #f56c6c;\r\n}\r\n\r\n.website-card:not(.malicious) .icon-container :deep(svg),\r\n.website-card:not(.malicious) .url-button :deep(.el-button) {\r\n    color: #409eff;\r\n}\r\n\r\n.info-list {\r\n    padding-left: 30px;\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.info-item {\r\n    display: flex;\r\n    margin-bottom: 7px;\r\n    line-height: 1.2;\r\n}\r\n\r\n.info-label {\r\n    width: 60px;\r\n    color: #a0a8b0;\r\n    font-weight: bold;\r\n}\r\n\r\n.info-value {\r\n    flex: 1;\r\n    color: #e0e0e0;\r\n}\r\n</style>\r\n","import script from \"./WebsiteCard.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./WebsiteCard.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./WebsiteCard.vue?vue&type=style&index=0&id=480e6c6c&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-480e6c6c\"]])\n\nexport default __exports__","import { defineStore } from \"pinia\"\r\nimport http from \"@/axios\"\r\nimport { reactive, ref } from \"vue\"\r\n\r\nexport const useWebsitesSearchStore = defineStore(\"websitesSearch\", {\r\n  state: () => ({\r\n    websiteList: [],\r\n    searchForm: reactive({\r\n      title: '',\r\n      url: '',\r\n      company: '',\r\n      pageSize: 6,\r\n      pageNum: 1\r\n    }),\r\n    total: 0,\r\n    maliciousCount: 0,\r\n    normalCount: 0\r\n  }),\r\n  actions: {\r\n    async searchWebsites() {\r\n      this.websiteList = []\r\n      // console.log('请求参数:', this.searchForm)\r\n      const response = await http.get(\"/websites/search\", {\r\n        params: this.searchForm\r\n      })\r\n      // console.log('响应数据:', response.data)\r\n      this.websiteList = response.data.data || []\r\n      this.total = response.data.total || 0\r\n      this.maliciousCount = response.data.maliciousCount || 0\r\n      this.normalCount = response.data.normalCount || 0\r\n    },\r\n\r\n    resetSearch() {\r\n      this.searchForm = reactive({\r\n        title: '',\r\n        url: '',\r\n        company: '',\r\n        pageSize: 6,\r\n        pageNum: 1\r\n      })\r\n      this.websiteList = []\r\n    }\r\n  }\r\n})","<template>\r\n    <div ref=\"chartRef\" style=\"width: 100%; height: 300px\"></div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, watch, onMounted, onBeforeUnmount } from 'vue'\r\nimport * as echarts from 'echarts'\r\nimport { useWebsitesSearchStore } from '@/store/websitesSearch'\r\n\r\nconst store = useWebsitesSearchStore()\r\nconst chartRef = ref(null)\r\nlet chartInstance = null\r\n\r\nconst initChart = () => {\r\n    if (!chartRef.value) return\r\n\r\n    chartInstance = echarts.init(chartRef.value)\r\n    updateChart()\r\n}\r\n\r\nconst updateChart = () => {\r\n    if (!chartInstance) return\r\n\r\n    const option = {\r\n        tooltip: {\r\n            trigger: 'item',\r\n            backgroundColor: '#252B3388',\r\n            borderColor: '#333',\r\n            formatter: '{b}:{c} ({d}%)',\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        },\r\n        legend: {\r\n            orient: 'horizontal',\r\n            left: 'center',\r\n            top: 10,\r\n            textStyle: {\r\n                color: '#fff'\r\n            }\r\n        },\r\n        series: [\r\n            {\r\n                type: 'pie',\r\n                radius: ['50%', '70%'],\r\n                avoidLabelOverlap: false,\r\n                label: {\r\n                    show: true,\r\n                    position: 'center',\r\n                    fontSize: '18',\r\n                    fontWeight: 'bold',\r\n                    color: '#ffffff',\r\n                    formatter: '网站分类'\r\n                },\r\n                data: [\r\n                    { value: store.maliciousCount, name: '恶意网站' },\r\n                    { value: store.normalCount, name: '正常网站' }\r\n                ],\r\n            }\r\n        ]\r\n    }\r\n\r\n    chartInstance.setOption(option)\r\n}\r\n\r\nonMounted(() => {\r\n    initChart()\r\n    window.addEventListener('resize', handleResize)\r\n})\r\n\r\nonBeforeUnmount(() => {\r\n    if (chartInstance) {\r\n        chartInstance.dispose()\r\n        chartInstance = null\r\n    }\r\n    window.removeEventListener('resize', handleResize)\r\n})\r\n\r\nconst handleResize = () => {\r\n    if (chartInstance) {\r\n        chartInstance.resize()\r\n    }\r\n}\r\n\r\nwatch(\r\n    () => [store.maliciousCount, store.normalCount],\r\n    () => {\r\n        updateChart()\r\n    },\r\n    { deep: true }\r\n)\r\n</script>","import script from \"./CountCirclrChart.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CountCirclrChart.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n    <div class=\"search-container\">\r\n        <!-- 标题栏 -->\r\n        <div class=\"search-title\">网站检索</div>\r\n\r\n        <!-- 搜索栏 -->\r\n        <div class=\"search-bar\">\r\n            <el-form :model=\"store.searchForm\" label-width=\"80px\">\r\n                <el-row>\r\n                    <el-col :span=\"6\">\r\n                        <el-form-item label=\"网站标题\">\r\n                            <el-input v-model=\"store.searchForm.title\" placeholder=\"请输入网站标题\" :prefix-icon=\"Search\" />\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"6\">\r\n                        <el-form-item label=\"网站URL\">\r\n                            <el-input v-model=\"store.searchForm.url\" placeholder=\"请输入URL\" :prefix-icon=\"Connection\" />\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"6\">\r\n                        <el-form-item label=\"公司名称\">\r\n                            <el-input v-model=\"store.searchForm.company\" placeholder=\"请输入公司名称\"\r\n                                :prefix-icon=\"OfficeBuilding\" />\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col :span=\"4\" :offset=\"1\">\r\n                        <el-button type=\"primary\" @click=\"handleSearch\" :icon=\"Search\">查询</el-button>\r\n                        <el-button @click=\"resetSearch\" :icon=\"Refresh\">清空</el-button>\r\n                    </el-col>\r\n                </el-row>\r\n            </el-form>\r\n        </div>\r\n\r\n        <!-- 搜索结果结果区域 -->\r\n        <div class=\"result-area\">\r\n            <div class=\"left-space\">\r\n                <div class=\"result-stats\">\r\n                    <div class=\"stats-header\">\r\n                        <span>相关结果</span>\r\n                        <el-icon>\r\n                            <InfoFilled />\r\n                        </el-icon>\r\n                    </div>\r\n                    <div class=\"stats-count\">{{ store.total }}</div>\r\n                </div>\r\n                <div class=\"chart\">\r\n                    <CountCirclrChart />\r\n                </div>\r\n            </div>\r\n            <div class=\"result-list\">\r\n                <WebsiteCard v-for=\"item in store.websiteList\" :key=\"item.id\" :data=\"item\" />\r\n            </div>\r\n        </div>\r\n\r\n        <!-- 分页 -->\r\n        <div class=\"pagination\">\r\n            <el-pagination :current-page=\"store.searchForm.pageNum\" :page-size=\"store.searchForm.pageSize\"\r\n                :background=\"true\" layout=\"prev, pager, next\" :total=\"store.total\" @current-change=\"\r\n                    (val) => {\r\n                        store.searchForm.pageNum = val\r\n                        store.searchWebsites()\r\n                    }\r\n                \" />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { onMounted } from 'vue'\r\nimport { Search, Refresh, OfficeBuilding, Connection, InfoFilled } from '@element-plus/icons-vue'\r\nimport WebsiteCard from '@/components/websites/search/WebsiteCard.vue'\r\nimport { useWebsitesSearchStore } from '@/store/websitesSearch'\r\nimport CountCirclrChart from '@/components/websites/search/CountCirclrChart.vue'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nconst store = useWebsitesSearchStore()\r\n\r\nonMounted(async () => {\r\n    search()\r\n})\r\n\r\nconst handleSearch = () => {\r\n    store.searchForm.pageNum = 1\r\n    search()\r\n}\r\n\r\nconst resetSearch = () => {\r\n    store.resetSearch()\r\n    search()\r\n}\r\n\r\nconst search = async () => {\r\n    try {\r\n        await store.searchWebsites()\r\n    } catch (error) {\r\n        ElMessage.error(error.response?.data || error.message)\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 上面的 */\r\n.search-title {\r\n    color: #efefef;\r\n    width: 97%;\r\n    padding: 10px;\r\n    font-size: 20px;\r\n    border-bottom: 0.5px solid #999;\r\n    user-select: none;\r\n    margin-bottom: 10px;\r\n}\r\n\r\n\r\n/* 中间部分：搜索结果 */\r\n.result-area {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    padding: 0 20px;\r\n}\r\n\r\n.left-space {\r\n    width: 24%;\r\n    height: 77vh;\r\n}\r\n\r\n.result-list {\r\n    width: 74%;\r\n    height: 77vh;\r\n    display: grid;\r\n    grid-template-columns: repeat(3, 1fr);\r\n    gap: 20px;\r\n}\r\n\r\n\r\n.result-stats {\r\n    background: #343a40;\r\n    border-radius: 10px;\r\n    padding: 20px;\r\n    color: whitesmoke;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.stats-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 12px;\r\n    font-size: 14px;\r\n}\r\n\r\n.stats-header .el-icon {\r\n    color: #a0a8b0;\r\n}\r\n\r\n.stats-count {\r\n    font-size: 22px;\r\n    font-weight: 500;\r\n    color: #ffffff;\r\n}\r\n\r\n/* 底部分页 */\r\n.pagination {\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    margin-left: 7%;\r\n}\r\n\r\n/* element-plus */\r\n:deep(.el-form-item__label),\r\n:deep(.el-pagination__total),\r\n:deep(.el-pagination__goto),\r\n:deep(.el-input__inner) {\r\n    color: #eee;\r\n}\r\n\r\n:deep(.el-input__wrapper),\r\n:deep(.el-pagination.is-background .btn-prev),\r\n:deep(.el-pagination.is-background .btn-next),\r\n:deep(.el-pagination.is-background .el-pager li) {\r\n    background-color: #343a40;\r\n    color: #d1d5db;\r\n}\r\n\r\n:deep(.el-pagination.is-background .el-pager li.is-active) {\r\n    background-color: #20262c !important;\r\n    color: #ffffff !important;\r\n}\r\n\r\n:deep(.el-pagination.is-background .btn-prev:hover),\r\n:deep(.el-pagination.is-background .btn-next:hover),\r\n:deep(.el-pagination.is-background .el-pager li:hover) {\r\n    background-color: #3e464e;\r\n}\r\n\r\n/* 按钮样式 */\r\n.el-button {\r\n    background-color: #343a40;\r\n    border-color: #495057;\r\n    color: #d1d5db;\r\n}\r\n\r\n.el-button:hover {\r\n    background-color: #3e464e;\r\n    border-color: #6c757d;\r\n    color: #ffffff;\r\n}\r\n\r\n.el-button--primary {\r\n    background-color: #3a5a9c;\r\n    border-color: #4a6db3;\r\n    color: #ffffff;\r\n}\r\n\r\n.el-button--primary:hover {\r\n    background-color: #4a6db3;\r\n    border-color: #5a7dc3;\r\n    color: #ffffff;\r\n}\r\n</style>\r\n","import script from \"./Search.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Search.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Search.vue?vue&type=style&index=0&id=2076640e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2076640e\"]])\n\nexport default __exports__"],"names":["props","__props","text","ref","data","isMalicious","__exports__","useWebsitesSearchStore","defineStore","state","websiteList","searchForm","reactive","title","url","company","pageSize","pageNum","total","maliciousCount","normalCount","actions","searchWebsites","this","response","http","get","params","resetSearch","store","chartRef","chartInstance","initChart","value","echarts","updateChart","option","tooltip","trigger","backgroundColor","borderColor","formatter","textStyle","color","legend","orient","left","top","series","type","radius","avoidLabelOverlap","label","show","position","fontSize","fontWeight","name","setOption","onMounted","window","addEventListener","handleResize","onBeforeUnmount","dispose","removeEventListener","resize","watch","deep","async","search","handleSearch","error","ElMessage","message"],"sourceRoot":""}